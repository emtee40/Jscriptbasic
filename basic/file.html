<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Jan 17, 2013
 | Rendered using Apache Maven Fluido Skin 1.2.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>jScriptBasic - jScriptBasic Project Documentation</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido.min.js"></script>

    
      <meta name="author" content="Peter Verhas" />
    <meta name="Date-Creation-yyyymmdd" content="20121204" />
    <meta name="Date-Revision-yyyymmdd" content="20130117" />
    <meta http-equiv="Content-Language" content="en" />
    
        </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://scriptbasic.com" id="bannerLeft">
                                                                                                <img src="../"  alt="ScriptBasic for Java"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2013-01-17</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.0.4-SNAPSHOT</li>
                      
                
            
      
                                  
    <li class="pull-right">              <a href="http://scriptbasic.com" class="externalLink" title="ScriptBasic">ScriptBasic</a>
  </li>

                        </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                                    <h3>Documentation for SB4J</h3>
                  <ul>
                  <li class="none">
                          <a href="../intro.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="../name.html" title="Name of the game">Name of the game</a>
            </li>
                  <li class="none">
                          <a href="../design.html" title="History and Design Goals">History and Design Goals</a>
            </li>
                  <li class="none">
                          <a href="../basic.html" title="Basic Language Implemented">Basic Language Implemented</a>
            </li>
                  <li class="none">
                          <a href="../install.html" title="Installation">Installation</a>
            </li>
                  <li class="none">
                          <a href="../advanced/index.html" title="Embedding API">Embedding API</a>
            </li>
                  <li class="none">
                          <a href="../configure.html" title="Configuration">Configuration</a>
            </li>
          </ul>
                        <h3>Project Documentation</h3>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                      
            
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://www.scriptbasic.com" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section"><h2>ScriptBasic for Java File Handling<a name="ScriptBasic_for_Java_File_Handling"></a></h2><p>ScriptBasic for Java contains an extension class that can be used from BASIC programs to perform file operations. This extension class is <b>NOT</b> registered by default. The embedding application has to register this class explicitly calling the method</p><div><pre>interpreter.registerFunctions(FileHandlingFunctions.class);</pre></div><p>The command line version does register this class before executing a script, thus you need not specify this class on the command line using the <tt>-Dsb4j.extensionclasses</tt> command line option.</p><div class="section"><h3>Opening and Closing a File<a name="Opening_and_Closing_a_File"></a></h3><p>To open a file the function <tt>open</tt> has to be used.</p><div><pre>file = open(fileName,mode)</pre></div><p>A file can be opened in four different ways. They can be read or write and each can be text or binary. The default is read and text. The parameter <tt>fileName</tt> should specify the name of the file and the parameter <tt>mode</tt> is a two letter text: <tt>&quot;rt&quot;</tt> to read in text mode, <tt>&quot;wt&quot;</tt> write in text mode, <tt>&quot;rb&quot;</tt> read in binary mode, <tt>&quot;wb&quot;</tt> write in binary mode. If the mode is read then this is enoug to specify <tt>&quot;t&quot;</tt> to read in text mode, or <tt>&quot;b&quot;</tt> to read in binary mode. Furthermore if the mode is read in text mode then an empty string <tt>&quot;&quot;</tt> can be used as the <tt>mode</tt> parameter.</p><p>Currently there is no way to open a file in read/write mixed mode. Also the operations you can perform on a text file are separated from the operations available for binary file handling.</p><p>The return value of the function <tt>open</tt> is a file handler that the BASIC program should not use in any other way than passing to other extension functions that are prepared to accept a file handler as argument. This simplest example is he <tt>close</tt> function:</p><div><pre>close file</pre></div><p>This function closes the file handle.</p></div><div class="section"><h3>Reading a text file<a name="Reading_a_text_file"></a></h3><p>Reading a text file is available line by line. The function to read a line from a text file is <tt>readLine</tt>:</p><div><pre>line = readLine(file)</pre></div><p>The argument to this function has to be the handle returned by the function <tt>open</tt>. The function reads a line from the file and returns the line as a string without the line termination character or characters. </p><p>If there is no more line to read the function returns undefined value that you can check calling the functions <tt>isDefined</tt> or <tt>isUndef</tt>.</p></div><div class="section"><h3>Writing to text file<a name="Writing_to_text_file"></a></h3><p>Writing to text file is possible using two functions: <tt>printfln</tt> and <tt>printf</tt>. Both of the functions accept a file handle and s single string argument. The function <tt>printf</tt> writes the argument string to the file. The function <tt>printfln</tt> writes the argument string to the file and also a line ending. This may not be a simple line-feed or carriage return character. The behavior is operating system dependent, therefore it is safer to use <tt>printfln file, string</tt> than <tt>printf file, string +&quot;\n&quot;</tt>.</p></div><div class="section"><h3>Reading Binary File<a name="Reading_Binary_File"></a></h3><p>When a file is opened in binary mode you can read bytes from the file. To do that you have to call the function</p><div><pre>byteBuffer = read(fileHandler, length)</pre></div><p><tt>fileHandler</tt> is the value returned by the function open, and <tt>length</tt> has to be an integer value, specifying the number of bytes that you want to read from the file.</p><p>The function will return a newly allocated byte buffer. Byte buffer is not accessible directly from BASIC. There are utility functions that allow you to access the individual elements of a byte buffer. (See below!)</p></div><div class="section"><h3>Writing Binary File<a name="Writing_Binary_File"></a></h3><p>To write a binary file you have to call the function </p><div><pre>write(fileHandler, byteBuffer)</pre></div><p><tt>fileHandler</tt> is the value returned by the function open, and the <tt>byteBuffer</tt> has to be a byte buffer that contains the bytes to be written into the file. For more information how to handle byte buffers read the next section.</p></div><div class="section"><h3>Byte Buffer Handling<a name="Byte_Buffer_Handling"></a></h3><p>Managing binary data you need byte buffers. Since byte and byte array is not part of the language the sb4j interpreter implements extension functions are necessary to create, read and write a byte buffer. This section describes the functions that are available to manage byte buffers. Note that these functions are not part of the file handling extension and as such are registered by the interpreter by default not only in the command line version.</p><p>To get a new byte buffer you need to call the function</p><div><pre>buffer = byteBuffer(length)</pre></div><p>The function argument <tt>length</tt> has to be an integer value and should specify the number of bytes the buffer should contain.</p><p>To get a byte from the buffer you can use the function</p><div><pre>byte = getByte(byteBuffer, Long)</pre></div><p>that will return an integer value. To set a value in the array you have to call</p><div><pre>setByte(byteBuffer, index, value)</pre></div><p>The argument <tt>byteBuffer</tt> is the buffer, <tt>index</tt> is the index value that should be between zero and the length of the buffer minus one. The <tt>value</tt> parameter has to be an integer value between -127 and 255.</p><div class="section"><h4>Conversion Between Byte Buffer and String<a name="Conversion_Between_Byte_Buffer_and_String"></a></h4><p>To get the bytes of a string in utf-8 encoding you have to call </p><div><pre>byteBuffer = getStringBytes(string)</pre></div><p>The argument <tt>string</tt> has to be some string value and the function will return the byte buffer that contains the byte array representation of the parameter string in UTF-8 character encoding. The reverse function is</p><div><pre>string = stringifyBuffer(byteBuffer)</pre></div><p>that will convert the bytes stored in the <tt>byteBuffer</tt> to string using UTF-8 character encoding.</p></div><div class="section"><h4>determine the Length of a Byte Buffer<a name="determine_the_Length_of_a_Byte_Buffer"></a></h4><p>The function <tt>length()</tt> can be used to determine the length of a byte buffer. (Note that the same function works for arrays ans strings.)</p><div><pre>l = length(Object)</pre></div></div></div><div class="section"><h3>Other File Operations<a name="Other_File_Operations"></a></h3><div class="section"><h4>Deleting a File<a name="Deleting_a_File"></a></h4><p>To delete a file you can use the function</p><div><pre>deleteFile fileName</pre></div><p>The argument to the function is the name of the file.</p></div><div class="section"><h4>Listing the Files in a Directory<a name="Listing_the_Files_in_a_Directory"></a></h4><p>To get the names of the files that are in a directory you have to use the function</p><div><pre>fileList = listFiles(directoryName)</pre></div><p>The argument to the function is the name of the directory. The return value is an array of string values containing the names of the files that are in the named directory.</p></div><div class="section"><h4>Getting the Absolute File Name<a name="Getting_the_Absolute_File_Name"></a></h4><p>To get the absolute name of the file containing the full path to the file you can call the function:</p><div><pre>string = absoluteFileName(String)</pre></div></div><div class="section"><h4>Checking File Permissions<a name="Checking_File_Permissions"></a></h4><p>There are numerous functions that you can use to check file permissions and other features. These functions return boolean value: </p><div><pre>fileExists(fileName)
fileCanExecute(fileName)
fileIsExecutable(fileName)
fileIsReadable(fileName)
fileIsWritable(fileName)
isDirectory(fileName)
isFile(fileName)
isHidden(fileName)</pre></div></div><div class="section"><h4>Setting File Permissions<a name="Setting_File_Permissions"></a></h4><p>In addition to checking file permissions youc an also set file permissions.</p><div><pre>setExecutable(fileName, permission, ownerOnly)
setReadable(fileName, permission, ownerOnly)
setWritable(fileName, permission, ownerOnly)</pre></div><p>sets the executable/readable/writable permission for the file named <tt>fileName</tt>. If the boolean value <tt>permission</tt> is true then the permissions will be set otherwise reset. The parameter <tt>ownerOwnly</tt> controls if the permission will only be set for the owner of the file or anybody else.</p><div><pre>setRedOnly(fileName)</pre></div><p>sets the file to be read only.</p></div><div class="section"><h4>Getting the Length of a File<a name="Getting_the_Length_of_a_File"></a></h4><div><pre>length = fileLength(fileName)</pre></div><p>returns the length of the file in terms of bytes.</p></div><div class="section"><h4>Getting the Free Space on a Drive<a name="Getting_the_Free_Space_on_a_Drive"></a></h4><div><pre>bytes = freeSpace(partitionName)</pre></div><p>returns the number of free bytes on the named partition.</p></div><div class="section"><h4>Getting and Setting the Time a File was Modified<a name="Getting_and_Setting_the_Time_a_File_was_Modified"></a></h4><p>The function</p><div><pre>setLastModified(fileName, time)</pre></div><p>sets the last modified time of the file to the specified time stamp specified by teh integer value <tt>time</tt>. To fetch the time the file was modified last time you can call the function:</p><div><pre>time = lastModified(fileName)</pre></div></div><div class="section"><h4>Creating Directory<a name="Creating_Directory"></a></h4><p>To create a directory call the function</p><div><pre>success = mkdir(directoryName)</pre></div><p>the parameter <tt>directoryName</tt> should name the directory to be created. The return value is true if the directory was created and false if some error happened.</p></div><div class="section"><h4>Getting the Parent Directory of a File or Directory parentDirectory(fileName)<a name="Getting_the_Parent_Directory_of_a_File_or_Directory_parentDirectoryfileName"></a></h4></div><div class="section"><h4>Renaming a File<a name="Renaming_a_File"></a></h4><p>To rename a file you have to call the function</p><div><pre>renameFile(fileName, newFileName)</pre></div></div></div></div>
                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span16">Copyright &copy;                    2013
                        <a href="http://www.verhas.com">Verhas and Verhas Software Craftsmen</a>.
            All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
